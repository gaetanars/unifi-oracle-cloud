# Unifi OS Server on Oracle Cloud - Environment Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to git!

# ============================================
# Oracle Cloud Infrastructure Credentials
# ============================================
TF_VAR_tenancy_ocid=ocid1.tenancy.oc1..your-tenancy-ocid
TF_VAR_user_ocid=ocid1.user.oc1..your-user-ocid
TF_VAR_fingerprint=your-api-key-fingerprint
TF_VAR_private_key_path=~/.oci/oci_api_key.pem
TF_VAR_region=eu-paris-1
TF_VAR_compartment_ocid=ocid1.compartment.oc1..your-compartment-ocid

# ============================================
# SSH Configuration
# ============================================
TF_VAR_ssh_public_key_path=~/.ssh/id_rsa.pub

# ============================================
# Instance Configuration
# ============================================
TF_VAR_instance_display_name=unifi-network-server
TF_VAR_instance_shape=VM.Standard.A1.Flex
TF_VAR_instance_ocpus=2
TF_VAR_instance_memory_in_gbs=12
TF_VAR_boot_volume_size_in_gbs=50

# ============================================
# Network Configuration
# ============================================
TF_VAR_vcn_cidr_block=10.0.0.0/16
TF_VAR_subnet_cidr_block=10.0.1.0/24

# ============================================
# UniFi OS Server Configuration
# ============================================
TF_VAR_timezone=Europe/Paris

# UniFi OS Server download URL (ARM64 installer)
# Default: Version 5.0.6
# Update this URL to install a different version
TF_VAR_unifi_os_server_download_url=https://fw-download.ubnt.com/data/unifi-os-server/df5b-linux-arm64-5.0.6-f35e944c-f4b6-4190-93a8-be61b96c58f4.6-arm64

# ============================================
# System Configuration
# ============================================
TF_VAR_ubuntu_version=24.04
TF_VAR_auto_updates=true

# ============================================
# Security - IP Restrictions (Optional)
# ============================================
# Restrict SSH access to specific IPs (recommended for production)
# TF_VAR_allowed_ssh_cidrs='["YOUR_IP/32"]'

# Restrict UniFi Adoption port (8080) to specific network IPs (recommended)
# Example: Only allow devices from your local network to adopt
# TF_VAR_allowed_adoption_cidrs='["192.168.1.0/24","10.0.0.0/8"]'

# ============================================
# Security - Port Configuration (Optional)
# ============================================
# Enable/disable specific ports in OCI Security Lists
# Useful for hardening security after initial setup
# All ports are enabled by default (true)
#
# RECOMMENDED: After initial setup and remote management configuration,
# disable port 11443 (console) for security
#
# TF_VAR_enable_port_stun=true                    # 3478/udp - STUN Discovery (required for remote access)
# TF_VAR_enable_port_controller_discovery=true    # 5005/tcp - Controller Discovery (required)
# TF_VAR_enable_port_remote_logging=false         # 5514/tcp - Remote Logging (optional)
# TF_VAR_enable_port_mobile_speedtest=true        # 6789/tcp - Mobile Speed Test (required for UniFi mobile app)
# TF_VAR_enable_port_device_adoption=true         # 8080/tcp - Device Adoption (required, restrict IPs via allowed_adoption_cidrs)
# TF_VAR_enable_port_https_portal=true            # 8443/tcp - HTTPS Portal/Web UI (required)
# TF_VAR_enable_port_https_guest_portal=true      # 8843/tcp - HTTPS Guest Portal (optional, hotspot)
# TF_VAR_enable_port_https_guest_redirect=true    # 8444/tcp - HTTPS Guest Redirect (optional, hotspot)
# TF_VAR_enable_port_http_redirect=true           # 8880/tcp - HTTP Redirect (optional, guest portal)
# TF_VAR_enable_port_https_redirect=true          # 8881/tcp - HTTPS Redirect (optional, guest portal)
# TF_VAR_enable_port_stun_server=false            # 8882/tcp - STUN Server (optional, WebRTC/video)
# TF_VAR_enable_port_api=false                    # 9543/tcp - API (optional, external API access)
# TF_VAR_enable_port_device_monitoring=true       # 10003/udp - AP/Device Monitoring (required)
# TF_VAR_enable_port_websockets=true              # 11443/tcp - WebSockets/Console (required for initial setup, can disable after)
# TF_VAR_enable_icmp_ping=true                    # ICMP - Ping (useful for network diagnostics)
#
# Example: Disable console port after setup
# TF_VAR_enable_port_websockets=false

# ============================================
# Terraform Backend (Optional - for remote state)
# ============================================
# If you use OCI Object Storage backend (recommended):
# 1. Run: mise run backend-setup
# 2. Copy backend.tf.example to backend.tf
# 3. Replace bucket and namespace in backend.tf
# 4. Run: terraform init -migrate-state
#
# Note: Backend uses the same OCI credentials above (TF_VAR_*)

# ============================================
# Tags (Optional)
# ============================================
# TF_VAR_tags='{"Project":"UniFi-Network","Environment":"Production","ManagedBy":"Terraform"}'
